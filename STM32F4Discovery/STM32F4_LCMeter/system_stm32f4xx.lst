
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter\system_stm32f4xx.o:     file format elf32-littlearm
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter\system_stm32f4xx.o


Disassembly of section .text.SystemInit:

00000000 <SystemInit>:
SystemInit():
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:205
  *         SystemFrequency variable.
  * @param  None
  * @retval None
  */
void SystemInit(void)
{
   0:	b082      	sub	sp, #8
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:208
  /* Reset the RCC clock configuration to the default reset state ------------*/
  /* Set HSION bit */
  RCC->CR |= (uint32_t)0x00000001;
   2:	f44f 5360 	mov.w	r3, #14336	; 0x3800
   6:	f2c4 0302 	movt	r3, #16386	; 0x4002
   a:	681a      	ldr	r2, [r3, #0]
   c:	f042 0201 	orr.w	r2, r2, #1
  10:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:211

  /* Reset CFGR register */
  RCC->CFGR = 0x00000000;
  12:	f04f 0200 	mov.w	r2, #0
  16:	609a      	str	r2, [r3, #8]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:214

  /* Reset HSEON, CSSON and PLLON bits */
  RCC->CR &= (uint32_t)0xFEF6FFFF;
  18:	6819      	ldr	r1, [r3, #0]
  1a:	f021 7184 	bic.w	r1, r1, #17301504	; 0x1080000
  1e:	f421 3180 	bic.w	r1, r1, #65536	; 0x10000
  22:	6019      	str	r1, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:217

  /* Reset PLLCFGR register */
  RCC->PLLCFGR = 0x24003010;
  24:	f243 0110 	movw	r1, #12304	; 0x3010
  28:	f2c2 4100 	movt	r1, #9216	; 0x2400
  2c:	6059      	str	r1, [r3, #4]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:220

  /* Reset HSEBYP bit */
  RCC->CR &= (uint32_t)0xFFFBFFFF;
  2e:	6819      	ldr	r1, [r3, #0]
  30:	f421 2180 	bic.w	r1, r1, #262144	; 0x40000
  34:	6019      	str	r1, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:223

  /* Disable all interrupts */
  RCC->CIR = 0x00000000;
  36:	60da      	str	r2, [r3, #12]
SetSysClock():
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:338
static void SetSysClock(void)
{
/******************************************************************************/
/*            PLL (clocked by HSE) used as System clock source                */
/******************************************************************************/
  __IO uint32_t StartUpCounter = 0, HSEStatus = 0;
  38:	9201      	str	r2, [sp, #4]
  3a:	9200      	str	r2, [sp, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:341
  
  /* Enable HSE */
  RCC->CR |= ((uint32_t)RCC_CR_HSEON);
  3c:	681a      	ldr	r2, [r3, #0]
  3e:	f442 3280 	orr.w	r2, r2, #65536	; 0x10000
  42:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:346
 
  /* Wait till HSE is ready and if Time out is reached exit */
  do
  {
    HSEStatus = RCC->CR & RCC_CR_HSERDY;
  44:	f44f 5260 	mov.w	r2, #14336	; 0x3800
  48:	f2c4 0202 	movt	r2, #16386	; 0x4002
  4c:	6813      	ldr	r3, [r2, #0]
  4e:	f403 3300 	and.w	r3, r3, #131072	; 0x20000
  52:	9300      	str	r3, [sp, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:347
    StartUpCounter++;
  54:	9b01      	ldr	r3, [sp, #4]
  56:	f103 0301 	add.w	r3, r3, #1
  5a:	9301      	str	r3, [sp, #4]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:348
  } while((HSEStatus == 0) && (StartUpCounter != HSE_STARTUP_TIMEOUT));
  5c:	9b00      	ldr	r3, [sp, #0]
  5e:	b91b      	cbnz	r3, 68 <SystemInit+0x68>
  60:	9b01      	ldr	r3, [sp, #4]
  62:	f5b3 6fa0 	cmp.w	r3, #1280	; 0x500
  66:	d1f1      	bne.n	4c <SystemInit+0x4c>
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:350

  if ((RCC->CR & RCC_CR_HSERDY) != RESET)
  68:	f44f 5360 	mov.w	r3, #14336	; 0x3800
  6c:	f2c4 0302 	movt	r3, #16386	; 0x4002
  70:	681b      	ldr	r3, [r3, #0]
  72:	f413 3f00 	tst.w	r3, #131072	; 0x20000
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:352
  {
    HSEStatus = (uint32_t)0x01;
  76:	bf14      	ite	ne
  78:	2301      	movne	r3, #1
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:356
  }
  else
  {
    HSEStatus = (uint32_t)0x00;
  7a:	2300      	moveq	r3, #0
  7c:	9300      	str	r3, [sp, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:359
  }

  if (HSEStatus == (uint32_t)0x01)
  7e:	9b00      	ldr	r3, [sp, #0]
  80:	2b01      	cmp	r3, #1
  82:	d146      	bne.n	112 <SystemInit+0x112>
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:362
  {
    /* Enable high performance mode, System frequency up to 168 MHz */
    RCC->APB1ENR |= RCC_APB1ENR_PWREN;
  84:	f44f 5360 	mov.w	r3, #14336	; 0x3800
  88:	f2c4 0302 	movt	r3, #16386	; 0x4002
  8c:	6c1a      	ldr	r2, [r3, #64]	; 0x40
  8e:	f042 5280 	orr.w	r2, r2, #268435456	; 0x10000000
  92:	641a      	str	r2, [r3, #64]	; 0x40
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:363
    PWR->CR |= PWR_CR_PMODE;  
  94:	f44f 42e0 	mov.w	r2, #28672	; 0x7000
  98:	f2c4 0200 	movt	r2, #16384	; 0x4000
  9c:	6811      	ldr	r1, [r2, #0]
  9e:	f441 4180 	orr.w	r1, r1, #16384	; 0x4000
  a2:	6011      	str	r1, [r2, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:366

    /* HCLK = SYSCLK / 1*/
    RCC->CFGR |= RCC_CFGR_HPRE_DIV1;
  a4:	689a      	ldr	r2, [r3, #8]
  a6:	609a      	str	r2, [r3, #8]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:369
      
    /* PCLK2 = HCLK / 2*/
    RCC->CFGR |= RCC_CFGR_PPRE2_DIV2;
  a8:	689a      	ldr	r2, [r3, #8]
  aa:	f442 4200 	orr.w	r2, r2, #32768	; 0x8000
  ae:	609a      	str	r2, [r3, #8]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:372
    
    /* PCLK1 = HCLK / 4*/
    RCC->CFGR |= RCC_CFGR_PPRE1_DIV4;
  b0:	689a      	ldr	r2, [r3, #8]
  b2:	f442 52a0 	orr.w	r2, r2, #5120	; 0x1400
  b6:	609a      	str	r2, [r3, #8]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:375

    /* Configure the main PLL */
    RCC->PLLCFGR = PLL_M | (PLL_N << 6) | (((PLL_P >> 1) -1) << 16) |
  b8:	f245 4208 	movw	r2, #21512	; 0x5408
  bc:	f2c0 7240 	movt	r2, #1856	; 0x740
  c0:	605a      	str	r2, [r3, #4]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:379
                   (RCC_PLLCFGR_PLLSRC_HSE) | (PLL_Q << 24);

    /* Enable the main PLL */
    RCC->CR |= RCC_CR_PLLON;
  c2:	681a      	ldr	r2, [r3, #0]
  c4:	f042 7280 	orr.w	r2, r2, #16777216	; 0x1000000
  c8:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:382

    /* Wait till the main PLL is ready */
    while((RCC->CR & RCC_CR_PLLRDY) == 0)
  ca:	f44f 5260 	mov.w	r2, #14336	; 0x3800
  ce:	f2c4 0202 	movt	r2, #16386	; 0x4002
  d2:	6813      	ldr	r3, [r2, #0]
  d4:	f013 7f00 	tst.w	r3, #33554432	; 0x2000000
  d8:	d0fb      	beq.n	d2 <SystemInit+0xd2>
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:387
    {
    }
   
    /* Configure Flash prefetch, Instruction cache, Data cache and wait state */
    FLASH->ACR = FLASH_ACR_ICEN |FLASH_ACR_DCEN |FLASH_ACR_LATENCY_5WS;
  da:	f44f 5370 	mov.w	r3, #15360	; 0x3c00
  de:	f2c4 0302 	movt	r3, #16386	; 0x4002
  e2:	f240 6205 	movw	r2, #1541	; 0x605
  e6:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:390

    /* Select the main PLL as system clock source */
    RCC->CFGR &= (uint32_t)((uint32_t)~(RCC_CFGR_SW));
  e8:	f44f 5360 	mov.w	r3, #14336	; 0x3800
  ec:	f2c4 0302 	movt	r3, #16386	; 0x4002
  f0:	689a      	ldr	r2, [r3, #8]
  f2:	f022 0203 	bic.w	r2, r2, #3
  f6:	609a      	str	r2, [r3, #8]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:391
    RCC->CFGR |= RCC_CFGR_SW_PLL;
  f8:	689a      	ldr	r2, [r3, #8]
  fa:	f042 0202 	orr.w	r2, r2, #2
  fe:	609a      	str	r2, [r3, #8]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:394

    /* Wait till the main PLL is used as system clock source */
    while ((RCC->CFGR & (uint32_t)RCC_CFGR_SWS ) != RCC_CFGR_SWS_PLL);
 100:	f44f 5260 	mov.w	r2, #14336	; 0x3800
 104:	f2c4 0202 	movt	r2, #16386	; 0x4002
 108:	6893      	ldr	r3, [r2, #8]
 10a:	f003 030c 	and.w	r3, r3, #12
 10e:	2b08      	cmp	r3, #8
 110:	d1fa      	bne.n	108 <SystemInit+0x108>
SystemInit():
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:237

  /* Configure the Vector Table location add offset address ------------------*/
#ifdef VECT_TAB_SRAM
  SCB->VTOR = SRAM_BASE | VECT_TAB_OFFSET; /* Vector Table Relocation in Internal SRAM */
#else
  SCB->VTOR = FLASH_BASE | VECT_TAB_OFFSET; /* Vector Table Relocation in Internal FLASH */
 112:	f44f 436d 	mov.w	r3, #60672	; 0xed00
 116:	f2ce 0300 	movt	r3, #57344	; 0xe000
 11a:	f04f 6200 	mov.w	r2, #134217728	; 0x8000000
 11e:	609a      	str	r2, [r3, #8]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:239
#endif
}
 120:	b002      	add	sp, #8
 122:	4770      	bx	lr

Disassembly of section .text.SystemCoreClockUpdate:

00000000 <SystemCoreClockUpdate>:
SystemCoreClockUpdate():
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:282
void SystemCoreClockUpdate(void)
{
  uint32_t tmp = 0, pllvco = 0, pllp = 2, pllsource = 0, pllm = 2;
  
  /* Get SYSCLK source -------------------------------------------------------*/
  tmp = RCC->CFGR & RCC_CFGR_SWS;
   0:	f44f 5360 	mov.w	r3, #14336	; 0x3800
   4:	f2c4 0302 	movt	r3, #16386	; 0x4002
   8:	689b      	ldr	r3, [r3, #8]
   a:	f003 030c 	and.w	r3, r3, #12
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:284

  switch (tmp)
   e:	2b04      	cmp	r3, #4
  10:	d00d      	beq.n	2e <SystemCoreClockUpdate+0x2e>
  12:	2b08      	cmp	r3, #8
  14:	d015      	beq.n	42 <SystemCoreClockUpdate+0x42>
  16:	2b00      	cmp	r3, #0
  18:	d144      	bne.n	a4 <SystemCoreClockUpdate+0xa4>
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:287
  {
    case 0x00:  /* HSI used as system clock source */
      SystemCoreClock = HSI_VALUE;
  1a:	f240 0300 	movw	r3, #0
  1e:	f2c0 0300 	movt	r3, #0
  22:	f44f 5210 	mov.w	r2, #9216	; 0x2400
  26:	f2c0 02f4 	movt	r2, #244	; 0xf4
  2a:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:288
      break;
  2c:	e043      	b.n	b6 <SystemCoreClockUpdate+0xb6>
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:290
    case 0x04:  /* HSE used as system clock source */
      SystemCoreClock = HSE_VALUE;
  2e:	f240 0300 	movw	r3, #0
  32:	f2c0 0300 	movt	r3, #0
  36:	f44f 5290 	mov.w	r2, #4608	; 0x1200
  3a:	f2c0 027a 	movt	r2, #122	; 0x7a
  3e:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:291
      break;
  40:	e039      	b.n	b6 <SystemCoreClockUpdate+0xb6>
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:297
    case 0x08:  /* PLL used as system clock source */

      /* PLL_VCO = (HSE_VALUE or HSI_VALUE / PLL_M) * PLL_N
         SYSCLK = PLL_VCO / PLL_P
         */    
      pllsource = (RCC->PLLCFGR & RCC_PLLCFGR_PLLSRC) >> 22;
  42:	f44f 5360 	mov.w	r3, #14336	; 0x3800
  46:	f2c4 0302 	movt	r3, #16386	; 0x4002
  4a:	6859      	ldr	r1, [r3, #4]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:298
      pllm = RCC->PLLCFGR & RCC_PLLCFGR_PLLM;
  4c:	685b      	ldr	r3, [r3, #4]
  4e:	f003 033f 	and.w	r3, r3, #63	; 0x3f
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:300
      
      if (pllsource != 0)
  52:	f411 0f80 	tst.w	r1, #4194304	; 0x400000
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:303
      {
        /* HSE used as PLL clock source */
        pllvco = (HSE_VALUE / pllm) * ((RCC->PLLCFGR & RCC_PLLCFGR_PLLN) >> 6);
  56:	f44f 5260 	mov.w	r2, #14336	; 0x3800
  5a:	f2c4 0202 	movt	r2, #16386	; 0x4002
  5e:	6850      	ldr	r0, [r2, #4]
  60:	f3c0 1088 	ubfx	r0, r0, #6, #9
  64:	bf19      	ittee	ne
  66:	f44f 5190 	movne.w	r1, #4608	; 0x1200
  6a:	f2c0 017a 	movtne	r1, #122	; 0x7a
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:308
      }
      else
      {
        /* HSI used as PLL clock source */
        pllvco = (HSI_VALUE / pllm) * ((RCC->PLLCFGR & RCC_PLLCFGR_PLLN) >> 6);      
  6e:	f44f 5110 	moveq.w	r1, #9216	; 0x2400
  72:	f2c0 01f4 	movteq	r1, #244	; 0xf4
  76:	fbb1 f2f3 	udiv	r2, r1, r3
  7a:	fb02 f200 	mul.w	r2, r2, r0
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:311
      }

      pllp = (((RCC->PLLCFGR & RCC_PLLCFGR_PLLP) >>16) + 1 ) *2;
  7e:	f44f 5360 	mov.w	r3, #14336	; 0x3800
  82:	f2c4 0302 	movt	r3, #16386	; 0x4002
  86:	6859      	ldr	r1, [r3, #4]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:312
      SystemCoreClock = pllvco/pllp;
  88:	f240 0300 	movw	r3, #0
  8c:	f2c0 0300 	movt	r3, #0
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:311
      {
        /* HSI used as PLL clock source */
        pllvco = (HSI_VALUE / pllm) * ((RCC->PLLCFGR & RCC_PLLCFGR_PLLN) >> 6);      
      }

      pllp = (((RCC->PLLCFGR & RCC_PLLCFGR_PLLP) >>16) + 1 ) *2;
  90:	f3c1 4101 	ubfx	r1, r1, #16, #2
  94:	f101 0101 	add.w	r1, r1, #1
  98:	ea4f 0141 	mov.w	r1, r1, lsl #1
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:312
      SystemCoreClock = pllvco/pllp;
  9c:	fbb2 f2f1 	udiv	r2, r2, r1
  a0:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:313
      break;
  a2:	e008      	b.n	b6 <SystemCoreClockUpdate+0xb6>
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:315
    default:
      SystemCoreClock = HSI_VALUE;
  a4:	f240 0300 	movw	r3, #0
  a8:	f2c0 0300 	movt	r3, #0
  ac:	f44f 5210 	mov.w	r2, #9216	; 0x2400
  b0:	f2c0 02f4 	movt	r2, #244	; 0xf4
  b4:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:320
      break;
  }
  /* Compute HCLK frequency --------------------------------------------------*/
  /* Get HCLK prescaler */
  tmp = AHBPrescTable[((RCC->CFGR & RCC_CFGR_HPRE) >> 4)];
  b6:	f44f 5360 	mov.w	r3, #14336	; 0x3800
  ba:	f2c4 0302 	movt	r3, #16386	; 0x4002
  be:	689a      	ldr	r2, [r3, #8]
  c0:	f3c2 1203 	ubfx	r2, r2, #4, #4
  c4:	f240 0300 	movw	r3, #0
  c8:	f2c0 0300 	movt	r3, #0
  cc:	189a      	adds	r2, r3, r2
  ce:	7912      	ldrb	r2, [r2, #4]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:322
  /* HCLK frequency */
  SystemCoreClock >>= tmp;
  d0:	6819      	ldr	r1, [r3, #0]
  d2:	fa21 f202 	lsr.w	r2, r1, r2
  d6:	601a      	str	r2, [r3, #0]
D:\FbEdit\Projects\Applications\fbe\STM32F4Discovery\STM32F4_LCMeter/system_stm32f4xx.c:323
}
  d8:	4770      	bx	lr
  da:	bf00      	nop
