
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar\main.o:     file format elf32-littlearm
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar\main.o


Disassembly of section .text.GetADCValue:

00000000 <GetADCValue>:
GetADCValue():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:162
* Input          : ADC channel
* Output         : None
* Return         : The ADC cannel reading
*******************************************************************************/
u16 GetADCValue(u8 Channel)
{
   0:	b570      	push	{r4, r5, r6, lr}
   2:	b086      	sub	sp, #24
   4:	4606      	mov	r6, r0
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:167
  vu8 i;
  vu16 ADCValue;
  ADC_InitTypeDef ADC_InitStructure;

  i = 0;
   6:	f04f 0300 	mov.w	r3, #0
   a:	f88d 3017 	strb.w	r3, [sp, #23]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:168
  ADCValue = 0;
   e:	f8ad 3014 	strh.w	r3, [sp, #20]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:169
  ADC_InitStructure.ADC_Mode = ADC_Mode_Independent;
  12:	9300      	str	r3, [sp, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:170
  ADC_InitStructure.ADC_ScanConvMode = ENABLE;
  14:	f04f 0401 	mov.w	r4, #1
  18:	f88d 4004 	strb.w	r4, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:171
  ADC_InitStructure.ADC_ContinuousConvMode = ENABLE;
  1c:	f88d 4005 	strb.w	r4, [sp, #5]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:172
  ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_None;
  20:	f44f 2260 	mov.w	r2, #917504	; 0xe0000
  24:	9202      	str	r2, [sp, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:173
  ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
  26:	9303      	str	r3, [sp, #12]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:174
  ADC_InitStructure.ADC_NbrOfChannel = 1;
  28:	f88d 4010 	strb.w	r4, [sp, #16]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:175
  ADC_Init(ADC1, &ADC_InitStructure);
  2c:	f44f 5510 	mov.w	r5, #9216	; 0x2400
  30:	f2c4 0501 	movt	r5, #16385	; 0x4001
  34:	4628      	mov	r0, r5
  36:	4669      	mov	r1, sp
  38:	f7ff fffe 	bl	0 <ADC_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:177
  /* ADC1 regular channel configuration */ 
  ADC_RegularChannelConfig(ADC1, Channel, 1, ADC_SampleTime_239Cycles5);
  3c:	4628      	mov	r0, r5
  3e:	4631      	mov	r1, r6
  40:	4622      	mov	r2, r4
  42:	f04f 0307 	mov.w	r3, #7
  46:	f7ff fffe 	bl	0 <ADC_RegularChannelConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:179
  /* Start ADC1 Software Conversion */ 
  ADC_SoftwareStartConvCmd(ADC1, ENABLE);
  4a:	4628      	mov	r0, r5
  4c:	4621      	mov	r1, r4
  4e:	f7ff fffe 	bl	0 <ADC_SoftwareStartConvCmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:181
  /* Add 8 conversions to reduce thermal noise */
  while (i<8)
  52:	f89d 3017 	ldrb.w	r3, [sp, #23]
  56:	2b07      	cmp	r3, #7
  58:	d821      	bhi.n	9e <GetADCValue+0x9e>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:183
    {
    ADC_ClearFlag(ADC1, ADC_FLAG_EOC);
  5a:	f44f 5410 	mov.w	r4, #9216	; 0x2400
  5e:	f2c4 0401 	movt	r4, #16385	; 0x4001
  62:	f04f 0502 	mov.w	r5, #2
  66:	4620      	mov	r0, r4
  68:	4629      	mov	r1, r5
  6a:	f7ff fffe 	bl	0 <ADC_ClearFlag>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:184
    while (ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC) == RESET)
  6e:	4620      	mov	r0, r4
  70:	4629      	mov	r1, r5
  72:	f7ff fffe 	bl	0 <ADC_GetFlagStatus>
  76:	2800      	cmp	r0, #0
  78:	d0f9      	beq.n	6e <GetADCValue+0x6e>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:187
    {
    }
    ADCValue = ADCValue + ADC1->DR;
  7a:	6ce2      	ldr	r2, [r4, #76]	; 0x4c
  7c:	f8bd 3014 	ldrh.w	r3, [sp, #20]
  80:	18d3      	adds	r3, r2, r3
  82:	b29b      	uxth	r3, r3
  84:	f8ad 3014 	strh.w	r3, [sp, #20]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:188
    i++;
  88:	f89d 3017 	ldrb.w	r3, [sp, #23]
  8c:	f103 0301 	add.w	r3, r3, #1
  90:	b2db      	uxtb	r3, r3
  92:	f88d 3017 	strb.w	r3, [sp, #23]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:181
  /* ADC1 regular channel configuration */ 
  ADC_RegularChannelConfig(ADC1, Channel, 1, ADC_SampleTime_239Cycles5);
  /* Start ADC1 Software Conversion */ 
  ADC_SoftwareStartConvCmd(ADC1, ENABLE);
  /* Add 8 conversions to reduce thermal noise */
  while (i<8)
  96:	f89d 3017 	ldrb.w	r3, [sp, #23]
  9a:	2b07      	cmp	r3, #7
  9c:	d9e3      	bls.n	66 <GetADCValue+0x66>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:191
    }
    ADCValue = ADCValue + ADC1->DR;
    i++;
  }
  /* Stop ADC1 Software Conversion */ 
  ADC_SoftwareStartConvCmd(ADC1, DISABLE);
  9e:	f44f 5010 	mov.w	r0, #9216	; 0x2400
  a2:	f2c4 0001 	movt	r0, #16385	; 0x4001
  a6:	f04f 0100 	mov.w	r1, #0
  aa:	f7ff fffe 	bl	0 <ADC_SoftwareStartConvCmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:193
  /* Return average of the 8 added conversions */
  return (ADCValue >> 3);
  ae:	f8bd 0014 	ldrh.w	r0, [sp, #20]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:194
}
  b2:	f3c0 00cc 	ubfx	r0, r0, #3, #13
  b6:	b006      	add	sp, #24
  b8:	bd70      	pop	{r4, r5, r6, pc}
  ba:	bf00      	nop

Disassembly of section .text.TIM1_UP_IRQHandler:

00000000 <TIM1_UP_IRQHandler>:
TIM1_UP_IRQHandler():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:204
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void TIM1_UP_IRQHandler(void)
{
   0:	b510      	push	{r4, lr}
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:206
  /* Set ping outputs high (FET's off) */
  GPIO_WriteBit(GPIOA, GPIO_Pin_9 | GPIO_Pin_8, Bit_SET);
   2:	f44f 6000 	mov.w	r0, #2048	; 0x800
   6:	f2c4 0001 	movt	r0, #16385	; 0x4001
   a:	f44f 7140 	mov.w	r1, #768	; 0x300
   e:	f04f 0201 	mov.w	r2, #1
  12:	f7ff fffe 	bl	0 <GPIO_WriteBit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:208
  /* Clear TIM1 Update interrupt pending bit */
  TIM1->SR = (u16)~TIM_IT_Update;
  16:	f44f 5330 	mov.w	r3, #11264	; 0x2c00
  1a:	f2c4 0301 	movt	r3, #16385	; 0x4001
  1e:	f64f 72fe 	movw	r2, #65534	; 0xfffe
  22:	821a      	strh	r2, [r3, #16]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:209
  if (STM32_Sonar.PingPulses)
  24:	f240 0300 	movw	r3, #0
  28:	f2c0 0300 	movt	r3, #0
  2c:	785b      	ldrb	r3, [r3, #1]
  2e:	b323      	cbz	r3, 7a <TIM1_UP_IRQHandler+0x7a>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:211
  {
    GPIO_Write(GPIOA,Ping);
  30:	f240 0400 	movw	r4, #0
  34:	f2c0 0400 	movt	r4, #0
  38:	8821      	ldrh	r1, [r4, #0]
  3a:	f44f 6000 	mov.w	r0, #2048	; 0x800
  3e:	f2c4 0001 	movt	r0, #16385	; 0x4001
  42:	b289      	uxth	r1, r1
  44:	f7ff fffe 	bl	0 <GPIO_Write>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:212
    if (Ping == 0x100)
  48:	8823      	ldrh	r3, [r4, #0]
  4a:	b29b      	uxth	r3, r3
  4c:	f5b3 7f80 	cmp.w	r3, #256	; 0x100
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:214
    {
      Ping = 0x200;
  50:	bf07      	ittee	eq
  52:	4623      	moveq	r3, r4
  54:	f44f 7200 	moveq.w	r2, #512	; 0x200
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:218
    }
    else
    {
      Ping = 0x100;
  58:	f240 0300 	movwne	r3, #0
  5c:	f2c0 0300 	movtne	r3, #0
  60:	bf18      	it	ne
  62:	f44f 7280 	movne.w	r2, #256	; 0x100
  66:	801a      	strh	r2, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:220
    }
    STM32_Sonar.PingPulses--;
  68:	f240 0300 	movw	r3, #0
  6c:	f2c0 0300 	movt	r3, #0
  70:	785a      	ldrb	r2, [r3, #1]
  72:	f102 32ff 	add.w	r2, r2, #4294967295
  76:	705a      	strb	r2, [r3, #1]
  78:	bd10      	pop	{r4, pc}
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:225
  }
  else
  {
    /* Ping done, Set DAC Gain */
    DAC->DHR12R1 = (u16)STM32_Sonar.Gain << 4;
  7a:	f240 0300 	movw	r3, #0
  7e:	f2c0 0300 	movt	r3, #0
  82:	78da      	ldrb	r2, [r3, #3]
  84:	ea4f 1202 	mov.w	r2, r2, lsl #4
  88:	f44f 43e8 	mov.w	r3, #29696	; 0x7400
  8c:	f2c4 0300 	movt	r3, #16384	; 0x4000
  90:	609a      	str	r2, [r3, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:227
    /* Disable TIM1 */
    TIM_Cmd(TIM1, DISABLE);
  92:	f44f 5030 	mov.w	r0, #11264	; 0x2c00
  96:	f2c4 0001 	movt	r0, #16385	; 0x4001
  9a:	f04f 0100 	mov.w	r1, #0
  9e:	f7ff fffe 	bl	0 <TIM_Cmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:229
    /* Enable ADC injected channel */
    ADC_AutoInjectedConvCmd(ADC1, ENABLE);
  a2:	f44f 5010 	mov.w	r0, #9216	; 0x2400
  a6:	f2c4 0001 	movt	r0, #16385	; 0x4001
  aa:	f04f 0101 	mov.w	r1, #1
  ae:	f7ff fffe 	bl	0 <ADC_AutoInjectedConvCmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:231
    /* Enable TIM2 */
    TIM_Cmd(TIM2, ENABLE);
  b2:	f04f 4080 	mov.w	r0, #1073741824	; 0x40000000
  b6:	f04f 0101 	mov.w	r1, #1
  ba:	f7ff fffe 	bl	0 <TIM_Cmd>
  be:	bd10      	pop	{r4, pc}

Disassembly of section .text.TIM2_IRQHandler:

00000000 <TIM2_IRQHandler>:
TIM2_IRQHandler():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:243
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void TIM2_IRQHandler(void)
{
   0:	b538      	push	{r3, r4, r5, lr}
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:246
  u16 Gain;
  /* Clear TIM2 Update interrupt pending bit */
  TIM2->SR = (u16)~TIM_IT_Update;
   2:	f04f 4380 	mov.w	r3, #1073741824	; 0x40000000
   6:	f64f 72fe 	movw	r2, #65534	; 0xfffe
   a:	821a      	strh	r2, [r3, #16]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:247
  nSample--;
   c:	f240 0300 	movw	r3, #0
  10:	f2c0 0300 	movt	r3, #0
  14:	781a      	ldrb	r2, [r3, #0]
  16:	f102 32ff 	add.w	r2, r2, #4294967295
  1a:	b2d2      	uxtb	r2, r2
  1c:	701a      	strb	r2, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:248
  if (nSample == 0)
  1e:	781b      	ldrb	r3, [r3, #0]
  20:	2b00      	cmp	r3, #0
  22:	d141      	bne.n	a8 <TIM2_IRQHandler+0xa8>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:251
  {
    /* Set the DAC to output next gain step */
    Gain = (u16)DAC->DHR12R1 + (u16)STM32_Sonar.GainInc;
  24:	f44f 42e8 	mov.w	r2, #29696	; 0x7400
  28:	f2c4 0200 	movt	r2, #16384	; 0x4000
  2c:	6891      	ldr	r1, [r2, #8]
  2e:	f240 0300 	movw	r3, #0
  32:	f2c0 0300 	movt	r3, #0
  36:	7918      	ldrb	r0, [r3, #4]
  38:	1841      	adds	r1, r0, r1
  3a:	b289      	uxth	r1, r1
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:256
    if (Gain > 4095)
    {
      Gain = 4095;
    }
    DAC->DHR12R1 = Gain;
  3c:	f640 70ff 	movw	r0, #4095	; 0xfff
  40:	4281      	cmp	r1, r0
  42:	bf28      	it	cs
  44:	4601      	movcs	r1, r0
  46:	6091      	str	r1, [r2, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:258
    /* Reinit nSample */
    nSample = STM32_Sonar.nSample;
  48:	799a      	ldrb	r2, [r3, #6]
  4a:	f240 0300 	movw	r3, #0
  4e:	f2c0 0300 	movt	r3, #0
  52:	701a      	strb	r2, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:260
    /* Increment the echo array index */
    EchoIndex++;
  54:	f240 0300 	movw	r3, #0
  58:	f2c0 0300 	movt	r3, #0
  5c:	881a      	ldrh	r2, [r3, #0]
  5e:	f102 0201 	add.w	r2, r2, #1
  62:	b292      	uxth	r2, r2
  64:	801a      	strh	r2, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:261
    if (EchoIndex == MAXECHO)
  66:	881b      	ldrh	r3, [r3, #0]
  68:	b29b      	uxth	r3, r3
  6a:	f5b3 7f00 	cmp.w	r3, #512	; 0x200
  6e:	d11b      	bne.n	3c <TIM2_IRQHandler+0x3c>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:264
    {
      /* Reset echo array index */
      EchoIndex = 0;
  70:	f240 0300 	movw	r3, #0
  74:	f2c0 0300 	movt	r3, #0
  78:	f04f 0400 	mov.w	r4, #0
  7c:	4625      	mov	r5, r4
  7e:	801c      	strh	r4, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:266
      /* Disable TIM2 */
      TIM2->CR1 = 0;
  80:	f04f 4380 	mov.w	r3, #1073741824	; 0x40000000
  84:	801c      	strh	r4, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:268
      /* Disable ADC injected channel */
      ADC_AutoInjectedConvCmd(ADC1, DISABLE);
  86:	f44f 5010 	mov.w	r0, #9216	; 0x2400
  8a:	f2c4 0001 	movt	r0, #16385	; 0x4001
  8e:	4621      	mov	r1, r4
  90:	f7ff fffe 	bl	0 <ADC_AutoInjectedConvCmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:270
      /* Set the DAC to output lowest gain */
      DAC->DHR12R1 = (u16)0x0;
  94:	f44f 43e8 	mov.w	r3, #29696	; 0x7400
  98:	f2c4 0300 	movt	r3, #16384	; 0x4000
  9c:	609c      	str	r4, [r3, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:272
      /* Done sampling echo*/
      STM32_Sonar.Start = 0;
  9e:	f240 0300 	movw	r3, #0
  a2:	f2c0 0300 	movt	r3, #0
  a6:	701c      	strb	r4, [r3, #0]
  a8:	bd38      	pop	{r3, r4, r5, pc}
  aa:	bf00      	nop

Disassembly of section .text.ADC_Startup:

00000000 <ADC_Startup>:
ADC_Startup():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:285
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void ADC_Startup(void)
{
   0:	b530      	push	{r4, r5, lr}
   2:	b087      	sub	sp, #28
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:288
  ADC_InitTypeDef ADC_InitStructure;
  /* ADCCLK = PCLK2/2 */
  RCC_ADCCLKConfig(RCC_PCLK2_Div2);
   4:	f04f 0000 	mov.w	r0, #0
   8:	f7ff fffe 	bl	0 <RCC_ADCCLKConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:290
  /* ADC1 configuration ------------------------------------------------------*/
  ADC_InitStructure.ADC_Mode = ADC_Mode_Independent;
   c:	f04f 0300 	mov.w	r3, #0
  10:	9301      	str	r3, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:291
  ADC_InitStructure.ADC_ScanConvMode = ENABLE;
  12:	f04f 0501 	mov.w	r5, #1
  16:	f88d 5008 	strb.w	r5, [sp, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:292
  ADC_InitStructure.ADC_ContinuousConvMode = ENABLE;
  1a:	f88d 5009 	strb.w	r5, [sp, #9]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:293
  ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_None;
  1e:	f44f 2260 	mov.w	r2, #917504	; 0xe0000
  22:	9203      	str	r2, [sp, #12]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:294
  ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
  24:	9304      	str	r3, [sp, #16]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:295
  ADC_InitStructure.ADC_NbrOfChannel = 1;
  26:	f88d 5014 	strb.w	r5, [sp, #20]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:296
  ADC_Init(ADC1, &ADC_InitStructure);
  2a:	f44f 5410 	mov.w	r4, #9216	; 0x2400
  2e:	f2c4 0401 	movt	r4, #16385	; 0x4001
  32:	4620      	mov	r0, r4
  34:	a901      	add	r1, sp, #4
  36:	f7ff fffe 	bl	0 <ADC_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:298
  /* ADC1 regular channel2 configuration */ 
  ADC_RegularChannelConfig(ADC1, ADC_Channel_2, 1, ADC_SampleTime_55Cycles5);
  3a:	4620      	mov	r0, r4
  3c:	f04f 0102 	mov.w	r1, #2
  40:	462a      	mov	r2, r5
  42:	f04f 0305 	mov.w	r3, #5
  46:	f7ff fffe 	bl	0 <ADC_RegularChannelConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:300
  /* Enable ADC1 */
  ADC_Cmd(ADC1, ENABLE);
  4a:	4620      	mov	r0, r4
  4c:	4629      	mov	r1, r5
  4e:	f7ff fffe 	bl	0 <ADC_Cmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:302
  /* Enable ADC1 reset calibaration register */   
  ADC_ResetCalibration(ADC1);
  52:	4620      	mov	r0, r4
  54:	f7ff fffe 	bl	0 <ADC_ResetCalibration>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:304
  /* Check the end of ADC1 reset calibration register */
  while(ADC_GetResetCalibrationStatus(ADC1));
  58:	f44f 5410 	mov.w	r4, #9216	; 0x2400
  5c:	f2c4 0401 	movt	r4, #16385	; 0x4001
  60:	4620      	mov	r0, r4
  62:	f7ff fffe 	bl	0 <ADC_GetResetCalibrationStatus>
  66:	2800      	cmp	r0, #0
  68:	d1fa      	bne.n	60 <ADC_Startup+0x60>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:306
  /* Start ADC1 calibaration */
  ADC_StartCalibration(ADC1);
  6a:	f44f 5010 	mov.w	r0, #9216	; 0x2400
  6e:	f2c4 0001 	movt	r0, #16385	; 0x4001
  72:	f7ff fffe 	bl	0 <ADC_StartCalibration>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:308
  /* Check the end of ADC1 calibration */
  while(ADC_GetCalibrationStatus(ADC1));
  76:	f44f 5410 	mov.w	r4, #9216	; 0x2400
  7a:	f2c4 0401 	movt	r4, #16385	; 0x4001
  7e:	4620      	mov	r0, r4
  80:	f7ff fffe 	bl	0 <ADC_GetCalibrationStatus>
  84:	2800      	cmp	r0, #0
  86:	d1fa      	bne.n	7e <ADC_Startup+0x7e>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:309
}
  88:	b007      	add	sp, #28
  8a:	bd30      	pop	{r4, r5, pc}

Disassembly of section .text.ADC_Configuration:

00000000 <ADC_Configuration>:
ADC_Configuration():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:320
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void ADC_Configuration(void)
{
   0:	b570      	push	{r4, r5, r6, lr}
   2:	b086      	sub	sp, #24
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:324
  ADC_InitTypeDef ADC_InitStructure;

  /* ADCCLK = PCLK2/2 */
  RCC_ADCCLKConfig(RCC_PCLK2_Div2);
   4:	f04f 0000 	mov.w	r0, #0
   8:	f7ff fffe 	bl	0 <RCC_ADCCLKConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:325
  ADC_InitStructure.ADC_Mode = ADC_Mode_Independent;
   c:	f04f 0600 	mov.w	r6, #0
  10:	9601      	str	r6, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:326
  ADC_InitStructure.ADC_ScanConvMode = ENABLE;
  12:	f04f 0401 	mov.w	r4, #1
  16:	f88d 4008 	strb.w	r4, [sp, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:327
  ADC_InitStructure.ADC_ContinuousConvMode = ENABLE;
  1a:	f88d 4009 	strb.w	r4, [sp, #9]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:328
  ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_None;
  1e:	f44f 2360 	mov.w	r3, #917504	; 0xe0000
  22:	9303      	str	r3, [sp, #12]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:329
  ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
  24:	9604      	str	r6, [sp, #16]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:331
  /* ADC1 single channel configuration */
  ADC_InitStructure.ADC_NbrOfChannel = 1;
  26:	f88d 4014 	strb.w	r4, [sp, #20]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:332
  ADC_Init(ADC1, &ADC_InitStructure);
  2a:	f44f 5510 	mov.w	r5, #9216	; 0x2400
  2e:	f2c4 0501 	movt	r5, #16385	; 0x4001
  32:	4628      	mov	r0, r5
  34:	a901      	add	r1, sp, #4
  36:	f7ff fffe 	bl	0 <ADC_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:334
  /* Setup injected channel */
  ADC_InjectedSequencerLengthConfig(ADC1,1);
  3a:	4628      	mov	r0, r5
  3c:	4621      	mov	r1, r4
  3e:	f7ff fffe 	bl	0 <ADC_InjectedSequencerLengthConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:336
  /* Sonar echo */
  ADC_InjectedChannelConfig(ADC1,ADC_Channel_2,1,ADC_SampleTime_1Cycles5);
  42:	4628      	mov	r0, r5
  44:	f04f 0102 	mov.w	r1, #2
  48:	4622      	mov	r2, r4
  4a:	4633      	mov	r3, r6
  4c:	f7ff fffe 	bl	0 <ADC_InjectedChannelConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:337
}
  50:	b006      	add	sp, #24
  52:	bd70      	pop	{r4, r5, r6, pc}

Disassembly of section .text.RCC_Configuration:

00000000 <RCC_Configuration>:
RCC_Configuration():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:347
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void RCC_Configuration(void)
{
   0:	b510      	push	{r4, lr}
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:350
  ErrorStatus HSEStartUpStatus;
  /* RCC system reset(for debug purpose) */
  RCC_DeInit();
   2:	f7ff fffe 	bl	0 <RCC_DeInit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:352
  /* Enable HSE */
  RCC_HSEConfig(RCC_HSE_ON);
   6:	f44f 3080 	mov.w	r0, #65536	; 0x10000
   a:	f7ff fffe 	bl	0 <RCC_HSEConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:354
  /* Wait till HSE is ready */
  HSEStartUpStatus = RCC_WaitForHSEStartUp();
   e:	f7ff fffe 	bl	0 <RCC_WaitForHSEStartUp>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:355
  if(HSEStartUpStatus == SUCCESS)
  12:	2801      	cmp	r0, #1
  14:	d13e      	bne.n	94 <RCC_Configuration+0x94>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:358
  {
    /* Enable Prefetch Buffer */
    FLASH_PrefetchBufferCmd(FLASH_PrefetchBuffer_Enable);
  16:	f04f 0010 	mov.w	r0, #16
  1a:	f7ff fffe 	bl	0 <FLASH_PrefetchBufferCmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:360
    /* Flash 2 wait state */
    FLASH_SetLatency(FLASH_Latency_0);
  1e:	f04f 0000 	mov.w	r0, #0
  22:	f7ff fffe 	bl	0 <FLASH_SetLatency>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:362
    /* HCLK = SYSCLK */
    RCC_HCLKConfig(RCC_SYSCLK_Div1); 
  26:	f04f 0000 	mov.w	r0, #0
  2a:	f7ff fffe 	bl	0 <RCC_HCLKConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:364
    /* PCLK2 = HCLK */
    RCC_PCLK2Config(RCC_HCLK_Div1); 
  2e:	f04f 0000 	mov.w	r0, #0
  32:	f7ff fffe 	bl	0 <RCC_PCLK2Config>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:366
    /* PCLK1 = HCLK */
    RCC_PCLK1Config(RCC_HCLK_Div1);
  36:	f04f 0000 	mov.w	r0, #0
  3a:	f7ff fffe 	bl	0 <RCC_PCLK1Config>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:368
    /* ADCCLK = PCLK2/2 */
    RCC_ADCCLKConfig(RCC_PCLK2_Div2);
  3e:	f04f 0000 	mov.w	r0, #0
  42:	f7ff fffe 	bl	0 <RCC_ADCCLKConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:370
    // /* PLLCLK = 8MHz * 6 = 48 MHz */
    RCC_PLLConfig(RCC_PLLSource_HSE_Div1, RCC_PLLMul_6);
  46:	f44f 3080 	mov.w	r0, #65536	; 0x10000
  4a:	f44f 1180 	mov.w	r1, #1048576	; 0x100000
  4e:	f7ff fffe 	bl	0 <RCC_PLLConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:374
    /* PLLCLK = 8MHz * 7 = 56 MHz */
    //RCC_PLLConfig(RCC_PLLSource_HSE_Div1, RCC_PLLMul_7);
    /* Enable PLL */ 
    RCC_PLLCmd(ENABLE);
  52:	f04f 0001 	mov.w	r0, #1
  56:	f7ff fffe 	bl	0 <RCC_PLLCmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:376
    /* Wait till PLL is ready */
    while(RCC_GetFlagStatus(RCC_FLAG_PLLRDY) == RESET)
  5a:	f04f 0439 	mov.w	r4, #57	; 0x39
  5e:	4620      	mov	r0, r4
  60:	f7ff fffe 	bl	0 <RCC_GetFlagStatus>
  64:	2800      	cmp	r0, #0
  66:	d0fa      	beq.n	5e <RCC_Configuration+0x5e>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:380
    {
    }
    /* Select PLL as system clock source */
    RCC_SYSCLKConfig(RCC_SYSCLKSource_PLLCLK);
  68:	f04f 0002 	mov.w	r0, #2
  6c:	f7ff fffe 	bl	0 <RCC_SYSCLKConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:382
    /* Wait till PLL is used as system clock source */
    while(RCC_GetSYSCLKSource() != 0x08)
  70:	f7ff fffe 	bl	0 <RCC_GetSYSCLKSource>
  74:	2808      	cmp	r0, #8
  76:	d1fb      	bne.n	70 <RCC_Configuration+0x70>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:386
    {
    }
    /* Enable TIM1, ADC1, GPIOA and GPIOC peripheral clocks */
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM1 | RCC_APB2Periph_ADC1 | RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOC, ENABLE);
  78:	f640 2014 	movw	r0, #2580	; 0xa14
  7c:	f04f 0101 	mov.w	r1, #1
  80:	f7ff fffe 	bl	0 <RCC_APB2PeriphClockCmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:388
    /* Enable DAC and TIM2 peripheral clocks */
    RCC_APB1PeriphClockCmd(RCC_APB1Periph_DAC | RCC_APB1Periph_TIM2, ENABLE);
  84:	f04f 0001 	mov.w	r0, #1
  88:	f2c2 0000 	movt	r0, #8192	; 0x2000
  8c:	f04f 0101 	mov.w	r1, #1
  90:	f7ff fffe 	bl	0 <RCC_APB1PeriphClockCmd>
  94:	bd10      	pop	{r4, pc}
  96:	bf00      	nop

Disassembly of section .text.GPIO_Configuration:

00000000 <GPIO_Configuration>:
GPIO_Configuration():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:400
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void GPIO_Configuration(void)
{
   0:	b5f0      	push	{r4, r5, r6, r7, lr}
   2:	b083      	sub	sp, #12
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:403
  GPIO_InitTypeDef GPIO_InitStructure;
  /* Configure ADC Channel6 (PA.06), ADC Channel5 (PA.05), DAC Channel1 (PA.04), ADC Channel3 (PA.03) and ADC Channel2 (PA.02) as analog input */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6 | GPIO_Pin_5 | GPIO_Pin_4 | GPIO_Pin_3 | GPIO_Pin_2;
   4:	f04f 037c 	mov.w	r3, #124	; 0x7c
   8:	f8ad 3004 	strh.w	r3, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:404
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AIN;
   c:	f04f 0300 	mov.w	r3, #0
  10:	f88d 3007 	strb.w	r3, [sp, #7]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:405
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  14:	f04f 0603 	mov.w	r6, #3
  18:	f88d 6006 	strb.w	r6, [sp, #6]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:406
  GPIO_Init(GPIOA, &GPIO_InitStructure);
  1c:	f44f 6400 	mov.w	r4, #2048	; 0x800
  20:	f2c4 0401 	movt	r4, #16385	; 0x4001
  24:	4620      	mov	r0, r4
  26:	a901      	add	r1, sp, #4
  28:	f7ff fffe 	bl	0 <GPIO_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:408
  /* Configure PC.09 (LED3) and PC.08 (LED4) as output */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9 | GPIO_Pin_8;
  2c:	f44f 7540 	mov.w	r5, #768	; 0x300
  30:	f8ad 5004 	strh.w	r5, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:409
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  34:	f04f 0710 	mov.w	r7, #16
  38:	f88d 7007 	strb.w	r7, [sp, #7]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:410
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  3c:	f88d 6006 	strb.w	r6, [sp, #6]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:411
  GPIO_Init(GPIOC, &GPIO_InitStructure);
  40:	f44f 5080 	mov.w	r0, #4096	; 0x1000
  44:	f2c4 0001 	movt	r0, #16385	; 0x4001
  48:	a901      	add	r1, sp, #4
  4a:	f7ff fffe 	bl	0 <GPIO_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:413
  /* Set ping outputs high (FET's off) */
  GPIO_WriteBit(GPIOA, GPIO_Pin_9 | GPIO_Pin_8, Bit_SET);
  4e:	4620      	mov	r0, r4
  50:	4629      	mov	r1, r5
  52:	f04f 0201 	mov.w	r2, #1
  56:	f7ff fffe 	bl	0 <GPIO_WriteBit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:415
  /* Configure PA.09 and PA.08 as outputs */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9 | GPIO_Pin_8;
  5a:	f8ad 5004 	strh.w	r5, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:416
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  5e:	f88d 7007 	strb.w	r7, [sp, #7]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:417
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  62:	f88d 6006 	strb.w	r6, [sp, #6]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:418
  GPIO_Init(GPIOA, &GPIO_InitStructure);
  66:	4620      	mov	r0, r4
  68:	a901      	add	r1, sp, #4
  6a:	f7ff fffe 	bl	0 <GPIO_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:419
}
  6e:	b003      	add	sp, #12
  70:	bdf0      	pop	{r4, r5, r6, r7, pc}
  72:	bf00      	nop

Disassembly of section .text.NVIC_Configuration:

00000000 <NVIC_Configuration>:
NVIC_Configuration():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:430
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void NVIC_Configuration(void)
{
   0:	b530      	push	{r4, r5, lr}
   2:	b083      	sub	sp, #12
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:433
  NVIC_InitTypeDef NVIC_InitStructure;
  /* Set the Vector Table base location at 0x08000000 */ 
  NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0x0);   
   4:	f04f 6000 	mov.w	r0, #134217728	; 0x8000000
   8:	f04f 0100 	mov.w	r1, #0
   c:	f7ff fffe 	bl	0 <NVIC_SetVectorTable>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:435
  /* Enable the TIM1 global Interrupt */
  NVIC_InitStructure.NVIC_IRQChannel = TIM1_UP_IRQChannel;
  10:	f04f 0319 	mov.w	r3, #25
  14:	f88d 3004 	strb.w	r3, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:436
  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
  18:	f04f 0500 	mov.w	r5, #0
  1c:	f88d 5005 	strb.w	r5, [sp, #5]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:437
  NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
  20:	f88d 5006 	strb.w	r5, [sp, #6]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:438
  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
  24:	f04f 0401 	mov.w	r4, #1
  28:	f88d 4007 	strb.w	r4, [sp, #7]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:439
  NVIC_Init(&NVIC_InitStructure);
  2c:	a801      	add	r0, sp, #4
  2e:	f7ff fffe 	bl	0 <NVIC_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:441
  /* Enable the TIM2 global Interrupt */
  NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQChannel;
  32:	f04f 031c 	mov.w	r3, #28
  36:	f88d 3004 	strb.w	r3, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:442
  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
  3a:	f88d 5005 	strb.w	r5, [sp, #5]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:443
  NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
  3e:	f88d 4006 	strb.w	r4, [sp, #6]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:444
  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
  42:	f88d 4007 	strb.w	r4, [sp, #7]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:445
  NVIC_Init(&NVIC_InitStructure);
  46:	a801      	add	r0, sp, #4
  48:	f7ff fffe 	bl	0 <NVIC_Init>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:446
}
  4c:	b003      	add	sp, #12
  4e:	bd30      	pop	{r4, r5, pc}

Disassembly of section .text.TIM1_Configuration:

00000000 <TIM1_Configuration>:
TIM1_Configuration():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:456
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void TIM1_Configuration(void)
{
   0:	b510      	push	{r4, lr}
   2:	b084      	sub	sp, #16
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:458
  TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;
  TIM_TimeBaseStructure.TIM_ClockDivision = 0;
   4:	f04f 0300 	mov.w	r3, #0
   8:	461a      	mov	r2, r3
   a:	f8ad 300a 	strh.w	r3, [sp, #10]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:459
  TIM_TimeBaseStructure.TIM_Prescaler = 0;
   e:	f8ad 3004 	strh.w	r3, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:463
  /* Time base configuration 56MHz clock */
  // TIM_TimeBaseStructure.TIM_Period = 139;
  /* Time base configuration 48MHz clock */
  TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
  12:	f8ad 3006 	strh.w	r3, [sp, #6]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:464
  TIM_TimeBaseStructure.TIM_Period = 119;
  16:	f04f 0377 	mov.w	r3, #119	; 0x77
  1a:	f8ad 3008 	strh.w	r3, [sp, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:465
  TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
  1e:	f88d 200c 	strb.w	r2, [sp, #12]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:466
  TIM_TimeBaseInit(TIM1, &TIM_TimeBaseStructure);
  22:	f44f 5430 	mov.w	r4, #11264	; 0x2c00
  26:	f2c4 0401 	movt	r4, #16385	; 0x4001
  2a:	4620      	mov	r0, r4
  2c:	a901      	add	r1, sp, #4
  2e:	f7ff fffe 	bl	0 <TIM_TimeBaseInit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:468
  /* Enable TIM1 Update interrupt */
  TIM_ClearITPendingBit(TIM1,TIM_IT_Update);
  32:	4620      	mov	r0, r4
  34:	f04f 0101 	mov.w	r1, #1
  38:	f7ff fffe 	bl	0 <TIM_ClearITPendingBit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:469
  TIM_ITConfig(TIM1, TIM_IT_Update, ENABLE);
  3c:	4620      	mov	r0, r4
  3e:	f04f 0101 	mov.w	r1, #1
  42:	460a      	mov	r2, r1
  44:	f7ff fffe 	bl	0 <TIM_ITConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:470
}
  48:	b004      	add	sp, #16
  4a:	bd10      	pop	{r4, pc}

Disassembly of section .text.TIM2_Configuration:

00000000 <TIM2_Configuration>:
TIM2_Configuration():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:480
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void TIM2_Configuration(void)
{
   0:	b500      	push	{lr}
   2:	b085      	sub	sp, #20
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:482
  TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;
  TIM_TimeBaseStructure.TIM_ClockDivision = 0;
   4:	f04f 0300 	mov.w	r3, #0
   8:	f8ad 300a 	strh.w	r3, [sp, #10]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:483
  TIM_TimeBaseStructure.TIM_Prescaler = 0;
   c:	f8ad 3004 	strh.w	r3, [sp, #4]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:487
  /* Time base configuration 56MHz clock */
  // TIM_TimeBaseStructure.TIM_Period = 302;
  /* Time base configuration 48MHz clock */
  TIM_TimeBaseStructure.TIM_Period = 259;
  10:	f240 1103 	movw	r1, #259	; 0x103
  14:	f8ad 1008 	strh.w	r1, [sp, #8]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:488
  TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
  18:	f8ad 3006 	strh.w	r3, [sp, #6]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:489
  TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
  1c:	f88d 300c 	strb.w	r3, [sp, #12]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:490
  TIM_TimeBaseInit(TIM2, &TIM_TimeBaseStructure);
  20:	f04f 4080 	mov.w	r0, #1073741824	; 0x40000000
  24:	a901      	add	r1, sp, #4
  26:	f7ff fffe 	bl	0 <TIM_TimeBaseInit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:492
  /* Enable TIM2 Update interrupt */
  TIM_ClearITPendingBit(TIM2,TIM_IT_Update);
  2a:	f04f 4080 	mov.w	r0, #1073741824	; 0x40000000
  2e:	f04f 0101 	mov.w	r1, #1
  32:	f7ff fffe 	bl	0 <TIM_ClearITPendingBit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:493
  TIM_ITConfig(TIM2, TIM_IT_Update, ENABLE);
  36:	f04f 4080 	mov.w	r0, #1073741824	; 0x40000000
  3a:	f04f 0101 	mov.w	r1, #1
  3e:	460a      	mov	r2, r1
  40:	f7ff fffe 	bl	0 <TIM_ITConfig>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:494
}
  44:	b005      	add	sp, #20
  46:	bd00      	pop	{pc}

Disassembly of section .text.main:

00000000 <main>:
main():
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:61
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
int main(void)
{
   0:	b5f8      	push	{r3, r4, r5, r6, r7, lr}
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:66
  u32 i;
  u32* ADC;
  u8 Echo;
  /* System clocks configuration */
  RCC_Configuration();
   2:	f7ff fffe 	bl	0 <main>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:68
  /* NVIC configuration */
  NVIC_Configuration();
   6:	f7ff fffe 	bl	0 <main>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:70
  /* GPIO configuration */
  GPIO_Configuration();
   a:	f7ff fffe 	bl	0 <main>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:72
  /* TIM1 configuration */
  TIM1_Configuration();
   e:	f7ff fffe 	bl	0 <main>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:74
  /* TIM2 configuration */
  TIM2_Configuration();
  12:	f7ff fffe 	bl	0 <main>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:76
  /* ADC1 configuration */
  ADC_Startup();
  16:	f7ff fffe 	bl	0 <main>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:78
  /* ADC1 injected channel configuration */
  ADC_Configuration();
  1a:	f7ff fffe 	bl	0 <main>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:80
  /* Enable DAC channel1 */
  DAC->CR = 0x1;
  1e:	f44f 43e8 	mov.w	r3, #29696	; 0x7400
  22:	f2c4 0300 	movt	r3, #16384	; 0x4000
  26:	f04f 0201 	mov.w	r2, #1
  2a:	601a      	str	r2, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:84

  while (1)
  {
    if (STM32_Sonar.Start == 1)
  2c:	f240 0500 	movw	r5, #0
  30:	f2c0 0500 	movt	r5, #0
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:88
    {
      STM32_Sonar.Start = 2;
      /* Toggle blue led */
      if (BlueLED)
  34:	f240 0700 	movw	r7, #0
  38:	f2c0 0700 	movt	r7, #0
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:60
* Description    : Main program
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
int main(void)
  3c:	f505 7402 	add.w	r4, r5, #520	; 0x208
  40:	f104 0407 	add.w	r4, r4, #7
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:131
      {
        /* To eliminate the need for an AM demodulator the largest */ 
        /* ADC reading is stored in its echo array element */
        /* Get echo */
        ADC = ( (u32 *) ADC1_ICDR_Address);
        Echo = (u8) ( (u16) (*(vu32*) (((*(u32*)&ADC)))) >> 4);
  44:	f242 463c 	movw	r6, #9276	; 0x243c
  48:	f2c4 0601 	movt	r6, #16385	; 0x4001
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:84
  /* Enable DAC channel1 */
  DAC->CR = 0x1;

  while (1)
  {
    if (STM32_Sonar.Start == 1)
  4c:	782b      	ldrb	r3, [r5, #0]
  4e:	2b01      	cmp	r3, #1
  50:	d172      	bne.n	138 <main+0x138>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:86
    {
      STM32_Sonar.Start = 2;
  52:	f04f 0302 	mov.w	r3, #2
  56:	702b      	strb	r3, [r5, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:88
      /* Toggle blue led */
      if (BlueLED)
  58:	783b      	ldrb	r3, [r7, #0]
  5a:	b16b      	cbz	r3, 78 <main+0x78>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:90
      {
        GPIO_WriteBit(GPIOC, GPIO_Pin_8, Bit_RESET);
  5c:	f44f 5080 	mov.w	r0, #4096	; 0x1000
  60:	f2c4 0001 	movt	r0, #16385	; 0x4001
  64:	f44f 7180 	mov.w	r1, #256	; 0x100
  68:	f04f 0200 	mov.w	r2, #0
  6c:	f7ff fffe 	bl	0 <GPIO_WriteBit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:91
        BlueLED = 0;
  70:	f04f 0300 	mov.w	r3, #0
  74:	703b      	strb	r3, [r7, #0]
  76:	e00c      	b.n	92 <main+0x92>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:95
      }
      else
      {
        GPIO_WriteBit(GPIOC, GPIO_Pin_8, Bit_SET);
  78:	f44f 5080 	mov.w	r0, #4096	; 0x1000
  7c:	f2c4 0001 	movt	r0, #16385	; 0x4001
  80:	f44f 7180 	mov.w	r1, #256	; 0x100
  84:	f04f 0201 	mov.w	r2, #1
  88:	f7ff fffe 	bl	0 <GPIO_WriteBit>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:96
        BlueLED = 1;
  8c:	f04f 0301 	mov.w	r3, #1
  90:	703b      	strb	r3, [r7, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:99
      }
      /* Read battery */
      STM32_Sonar.ADCBatt = GetADCValue(ADC_Channel_3);
  92:	f04f 0003 	mov.w	r0, #3
  96:	f7ff fffe 	bl	0 <main>
  9a:	8168      	strh	r0, [r5, #10]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:101
      /* Read water temprature */
      STM32_Sonar.ADCWaterTemp = GetADCValue(ADC_Channel_5);
  9c:	f04f 0005 	mov.w	r0, #5
  a0:	f7ff fffe 	bl	0 <main>
  a4:	81a8      	strh	r0, [r5, #12]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:103
      /* Read air temprature */
      STM32_Sonar.ADCAirTemp = GetADCValue(ADC_Channel_6);
  a6:	f04f 0006 	mov.w	r0, #6
  aa:	f7ff fffe 	bl	0 <main>
  ae:	81e8      	strh	r0, [r5, #14]
  b0:	f105 030f 	add.w	r3, r5, #15
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:108
      /* Clear the echo array */
      i = 0;
      while (i < MAXECHO)
      {
        STM32_Sonar.Echo[i] = 0;
  b4:	f04f 0200 	mov.w	r2, #0
  b8:	f803 2f01 	strb.w	r2, [r3, #1]!
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:106
      STM32_Sonar.ADCWaterTemp = GetADCValue(ADC_Channel_5);
      /* Read air temprature */
      STM32_Sonar.ADCAirTemp = GetADCValue(ADC_Channel_6);
      /* Clear the echo array */
      i = 0;
      while (i < MAXECHO)
  bc:	42a3      	cmp	r3, r4
  be:	d1fb      	bne.n	b8 <main+0xb8>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:112
      {
        STM32_Sonar.Echo[i] = 0;
        i++;
      }
      /* Init nSample */
      nSample = STM32_Sonar.nSample;
  c0:	79aa      	ldrb	r2, [r5, #6]
  c2:	f240 0300 	movw	r3, #0
  c6:	f2c0 0300 	movt	r3, #0
  ca:	701a      	strb	r2, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:114
      /* Reset echo index */
      EchoIndex = 0;
  cc:	f240 0200 	movw	r2, #0
  d0:	f2c0 0200 	movt	r2, #0
  d4:	f04f 0300 	mov.w	r3, #0
  d8:	8013      	strh	r3, [r2, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:116
      /* Set the TIM1 Autoreload value */
      TIM1->ARR = STM32_Sonar.PingTimer;
  da:	78aa      	ldrb	r2, [r5, #2]
  dc:	f44f 5030 	mov.w	r0, #11264	; 0x2c00
  e0:	f2c4 0001 	movt	r0, #16385	; 0x4001
  e4:	8582      	strh	r2, [r0, #44]	; 0x2c
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:118
      /* Reset TIM1 count */
      TIM1->CNT = 0;
  e6:	8483      	strh	r3, [r0, #36]	; 0x24
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:120
      /* Set TIM1 repetirion counter */
      TIM1->RCR = 0;
  e8:	8603      	strh	r3, [r0, #48]	; 0x30
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:122
      /* Init Ping */
      Ping = 0x100;
  ea:	f240 0300 	movw	r3, #0
  ee:	f2c0 0300 	movt	r3, #0
  f2:	f44f 7280 	mov.w	r2, #256	; 0x100
  f6:	801a      	strh	r2, [r3, #0]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:124
      /* Enable TIM1 */
      TIM_Cmd(TIM1, ENABLE);
  f8:	f04f 0101 	mov.w	r1, #1
  fc:	f7ff fffe 	bl	0 <TIM_Cmd>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:125
      while (STM32_Sonar.Start == 2)
 100:	782b      	ldrb	r3, [r5, #0]
 102:	2b02      	cmp	r3, #2
 104:	d118      	bne.n	138 <main+0x138>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:143
        if (Echo > STM32_Sonar.Echo[EchoIndex])
        {
          STM32_Sonar.Echo[EchoIndex] = Echo;
        }
        /* Done, Store the current range as the first byte in the echo array */
        STM32_Sonar.Echo[0] = STM32_Sonar.Range;
 106:	f895 e005 	ldrb.w	lr, [r5, #5]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:138
        // if (Echo > 253)
        // {
          // Echo = 253;
        // }
        /* If echo larger than previous echo, update the echo array */
        if (Echo > STM32_Sonar.Echo[EchoIndex])
 10a:	f240 0000 	movw	r0, #0
 10e:	f2c0 0000 	movt	r0, #0
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:131
      {
        /* To eliminate the need for an AM demodulator the largest */ 
        /* ADC reading is stored in its echo array element */
        /* Get echo */
        ADC = ( (u32 *) ADC1_ICDR_Address);
        Echo = (u8) ( (u16) (*(vu32*) (((*(u32*)&ADC)))) >> 4);
 112:	6833      	ldr	r3, [r6, #0]
 114:	ea4f 1313 	mov.w	r3, r3, lsr #4
 118:	b2da      	uxtb	r2, r3
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:138
        // if (Echo > 253)
        // {
          // Echo = 253;
        // }
        /* If echo larger than previous echo, update the echo array */
        if (Echo > STM32_Sonar.Echo[EchoIndex])
 11a:	8801      	ldrh	r1, [r0, #0]
 11c:	b289      	uxth	r1, r1
 11e:	1869      	adds	r1, r5, r1
 120:	7c09      	ldrb	r1, [r1, #16]
 122:	4291      	cmp	r1, r2
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:140
        {
          STM32_Sonar.Echo[EchoIndex] = Echo;
 124:	bf3f      	itttt	cc
 126:	8802      	ldrhcc	r2, [r0, #0]
 128:	b292      	uxthcc	r2, r2
 12a:	18aa      	addcc	r2, r5, r2
 12c:	7413      	strbcc	r3, [r2, #16]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:143
        }
        /* Done, Store the current range as the first byte in the echo array */
        STM32_Sonar.Echo[0] = STM32_Sonar.Range;
 12e:	f885 e010 	strb.w	lr, [r5, #16]
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:125
      TIM1->RCR = 0;
      /* Init Ping */
      Ping = 0x100;
      /* Enable TIM1 */
      TIM_Cmd(TIM1, ENABLE);
      while (STM32_Sonar.Start == 2)
 132:	782b      	ldrb	r3, [r5, #0]
 134:	2b02      	cmp	r3, #2
 136:	d0ec      	beq.n	112 <main+0x112>
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:146
        }
        /* Done, Store the current range as the first byte in the echo array */
        STM32_Sonar.Echo[0] = STM32_Sonar.Range;
      }
    }
    i = 0;
 138:	f04f 0300 	mov.w	r3, #0
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:149
    while (i < 1000)
    {
      i++;
 13c:	f103 0301 	add.w	r3, r3, #1
C:\FbEdit\Projects\Applications\FbEdit\ShowMap\STM32_Sonar/main.c:147
        /* Done, Store the current range as the first byte in the echo array */
        STM32_Sonar.Echo[0] = STM32_Sonar.Range;
      }
    }
    i = 0;
    while (i < 1000)
 140:	f5b3 7f7a 	cmp.w	r3, #1000	; 0x3e8
 144:	d1fa      	bne.n	13c <main+0x13c>
 146:	e781      	b.n	4c <main+0x4c>
